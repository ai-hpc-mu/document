

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AlphaFold 3 : The inference pipeline &mdash; Exascale Knowledge Share 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Mathematical modeling in Physics Engineering, Biological and Social Science with QwQ LLM from China" href="mathphysic.html" />
    <link rel="prev" title="Quick Start" href="quickStart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Exascale Knowledge Share
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="home.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickStart.html">Quick Start</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">AlphaFold 3 :  The inference pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dataset">Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#alphafold-3-model-parameters-terms-of-use">ALPHAFOLD 3 MODEL PARAMETERS TERMS OF USE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-0-clone-alphafold-3-source-code">Step 0: Clone Alphafold 3 source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-1-create-alphafold-3-input">Step 1: Create Alphafold 3 input</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-2-run-alphafold-3-in-container-singularity">Step 2: Run Alphafold 3 in container, Singularity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-3-view-oupput">Step 3: View oupput</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reference">Reference:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mathphysic.html">Mathematical modeling in Physics Engineering, Biological and Social Science with QwQ LLM from China</a></li>
<li class="toctree-l1"><a class="reference internal" href="rstudio.html">Mathematics and Statistics Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="wine.html">Excel Macro Runner Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="container.html">Apptainer/Singularity</a></li>
<li class="toctree-l1"><a class="reference internal" href="workshop.html">Workshop</a></li>
<li class="toctree-l1"><a class="reference internal" href="swguide.html">Software Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="swguide.html#macromolecular-modeling-and-visualization">Macromolecular Modeling and Visualization:</a></li>
<li class="toctree-l1"><a class="reference internal" href="swguide.html#gromacs-high-performance-molecular-dynamics">GROMACS: High Performance Molecular Dynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="swguide.html#pilot-test-cluster-access-and-performance-awareness">Pilot Test: Cluster Access and Performance Awareness:</a></li>
<li class="toctree-l1"><a class="reference internal" href="powersaving.html">Electrical Energy  Saving</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantumml.html">Quantum Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="torch_multi.html">Pytorch DISTRIBUTED DATA PARALLEL</a></li>
<li class="toctree-l1"><a class="reference internal" href="parabricks.html">NVIDIA Parabricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="cryo_em.html">Cryogenic electron microscopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="cryo_em.html#relion-4-0-for-cryo-em-structure-determination">Relion 4.0 for cryo-EM structure determination</a></li>
<li class="toctree-l1"><a class="reference internal" href="cryo_em.html#computational-imaging-system-for-transmission-electron-microscopy-cistem">Computational Imaging System for Transmission Electron Microscopy(cisTEM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html">LLaMA</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html#lora-ai-at-the-edge-is-comming">LoRA: AI at the edge is comming.</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html#goolge-s-llm-gemma">Goolge’s LLM: Gemma</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html#responsible-ai">Responsible AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html#get-source-repository-and-make-them-work-on-k8s-for-ollama">Get Source repository and make them work on K8S  for Ollama</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html#restapi-test-on-host-that-port-forwarded">RestAPI test on host that port forwarded</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html#multi-lingual-capabilities-in-llama3-1-405b">Multi-lingual capabilities in Llama3.1 405B</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html#api-inferencing-check-available-model">API inferencing check  available model :</a></li>
<li class="toctree-l1"><a class="reference internal" href="e4s.html">Extreme-scale Scientific Software Stack (E4S)</a></li>
<li class="toctree-l1"><a class="reference internal" href="bioinfo.html">Biomedical Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="bioinfo.html#reproducting-research-results-with-python-and-conda-package-management">Reproducting research results with Python and Conda Package management</a></li>
<li class="toctree-l1"><a class="reference internal" href="bioinfo.html#nextflow-reproducible-scientific-workflows">Nextflow:Reproducible scientific workflows</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Exascale Knowledge Share</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">AlphaFold 3 :  The inference pipeline</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/alphafold.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="alphafold-3-the-inference-pipeline">
<h1>AlphaFold 3 :  The inference pipeline<a class="headerlink" href="#alphafold-3-the-inference-pipeline" title="Link to this heading"></a></h1>
<p>AlphaFold3 represents a significant advancement in the field of protein structure prediction, building on the success of its predecessors. This model excels in predicting the 3D structures of protein-protein complexes directly from their sequences, offering deeper insights into biomolecular interactions. AlphaFold3 synergizes with other methods to predict the effects of mutations on protein interactions, providing a more comprehensive understanding of binding energies. Despite its advancements, AlphaFold3 still faces challenges in modeling full atomic details, which are better addressed by force field methods. Future integration of these approaches could enhance the accuracy of predictions. This breakthrough has far-reaching implications for protein engineering and drug discovery.[1]</p>
<p>The Nobel Prize in Chemistry 2024 was awarded to:</p>
<p>David Baker (University of Washington, USA) for his work on computational protein design. He has successfully created entirely new kinds of proteins, which can be used in pharmaceuticals, vaccines, nanomaterials, and sensors.</p>
<p>Demis Hassabis and John Jumper (Google DeepMind, UK) for their development of AlphaFold2, an AI model that predicts protein structures from amino acid sequences. This breakthrough has solved a 50-year-old problem and has been used to predict the structure of nearly all known proteins, aiding in scientific research and applications like understanding antibiotic resistance and creating enzymes to decompose plastic.
These discoveries highlight the incredible potential of proteins as chemical tools and open up vast possibilities for future scientific advancements.</p>
<p>Beyond AlphaFold 2, recently Google release AlphaFold 3 as service. We have to access to model and service that is avavailabel on provider resources.
Surprisingly that “you may only use AlphaFold 3 model parameters if received directly from Google”. The pacakge is available about 10 November, 2024 based on Github repository.[3][4]</p>
<section id="dataset">
<h2>Dataset<a class="headerlink" href="#dataset" title="Link to this heading"></a></h2>
<p>AlphaFold 3 needs multiple genetic (sequence) protein and RNA databases to run:</p>
<p>BFD small
MGnify
PDB (structures in the mmCIF format)
PDB seqres
UniProt
UniRef90
NT
RFam
RNACentral</p>
<p>I uploaded those on our local cluster at ‘/cm/shared/dataset/alphafold3’</p>
</section>
<section id="alphafold-3-model-parameters-terms-of-use">
<h2>ALPHAFOLD 3 MODEL PARAMETERS TERMS OF USE<a class="headerlink" href="#alphafold-3-model-parameters-terms-of-use" title="Link to this heading"></a></h2>
<p>AlphaFold3 is now ‘open source’. This is not the case, as weights for the model can only be accessed upon request, and the code can only be used for non-commercial applications[4]. We have to agree up on how to use this model, <a href="#id1"><span class="problematic" id="id2">`ALPHAFOLD 3 MODEL PARAMETERS TERMS OF USE&lt;https://github.com/google-deepmind/alphafold3/blob/main/WEIGHTS_TERMS_OF_USE.md&gt;`_</span></a></p>
<p>I uploaded model parameters on our local cluster at ‘/cm/shared/models/alphafold3’.</p>
</section>
<section id="step-0-clone-alphafold-3-source-code">
<h2>Step 0: Clone Alphafold 3 source code<a class="headerlink" href="#step-0-clone-alphafold-3-source-code" title="Link to this heading"></a></h2>
<p>Firt we need source code to run pipeline.
Assumed you are on allocated compute node with gpu or gpus.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>salloc<span class="w"> </span>-t<span class="w"> </span><span class="m">1</span>:0:0<span class="w"> </span>-c<span class="w"> </span><span class="m">32</span><span class="w"> </span>--mem<span class="o">=</span>64GB<span class="w">  </span>--gres<span class="o">=</span>gpu:1
<span class="gp">$ </span>ssh<span class="w"> </span>&lt;allocated<span class="w"> </span>node&gt;
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>
<span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/google-deepmind/alphafold3.git
</pre></div>
</div>
</section>
<section id="step-1-create-alphafold-3-input">
<h2>Step 1: Create Alphafold 3 input<a class="headerlink" href="#step-1-create-alphafold-3-input" title="Link to this heading"></a></h2>
<p>To predict structure, we need input sequence file in JSON format: fold_input.json</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>alphafold3

<span class="gp">$ </span>mkdir<span class="w"> </span>af_input<span class="w"> </span>af_output

<span class="gp">$ </span>vi<span class="w"> </span>fold_input.json

<span class="go">{</span>

<span class="go">  &quot;name&quot;: &quot;2PV7&quot;,</span>

<span class="go">  &quot;sequences&quot;: [</span>

<span class="go">    {</span>

<span class="go">      &quot;protein&quot;: {</span>

<span class="go">         &quot;id&quot;: [&quot;A&quot;, &quot;B&quot;],</span>

<span class="go">         &quot;sequence&quot;: &quot;GMRESYANENQFGFKTINSDIHKIVIVGGYGKLGGLFARYLRASGYPISILDREDWAVAESILANADVVIVSVPINLTLETIERLKPYLTENMLLADLTSVKREPLAKMLEVHTGAVLGLHPMFGADIASMAKQVVVRCDGRFPERYEWLLEQIQIWGAKIYQTNATEHDHNMTYIQALRHFSTFANGLHLSKQPINLANLLALSSPIYRLELAMIGRLFAQDAELYADIIMDKSENLAVIETLKQTYDEALTFFENNDRQGFIDAFHKVRDWFGDYSEQFLKESRQLLQQANDLKQG&quot;</span>

<span class="go">      }</span>

<span class="go">    }</span>

<span class="go">  ],</span>

<span class="go"> &quot;modelSeeds&quot;: [1],</span>

<span class="go"> &quot;dialect&quot;: &quot;alphafold3&quot;,</span>

<span class="go"> &quot;version&quot;: 1</span>

<span class="go">}</span>
</pre></div>
</div>
<p>We create two folders for ‘af_input’ and ‘af_output’.</p>
</section>
<section id="step-2-run-alphafold-3-in-container-singularity">
<h2>Step 2: Run Alphafold 3 in container, Singularity<a class="headerlink" href="#step-2-run-alphafold-3-in-container-singularity" title="Link to this heading"></a></h2>
<p>We build singularity image on /app folder. The following is sample parameter for predicting input the sequence.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"> $ </span>~/alphafold3$<span class="w"> </span>singularity<span class="w"> </span><span class="nb">exec</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--nv<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-B<span class="w"> </span>/home/snit.san/alphafold3/af_input:/root/af_input<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-B<span class="w"> </span>/home/snit.san/alphafold3/af_output:/root/af_output<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-B<span class="w"> </span>/cm/shared/models/alphafold3:/root/models<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-B<span class="w"> </span>/cm/shared/dataset/alphafold3:/root/public_databases<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>/app/alphafold3.sif<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>python<span class="w"> </span>/home/snit.san/alphafold3/run_alphafold.py<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--json_path<span class="o">=</span>/root/af_input/fold_input.json<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--model_dir<span class="o">=</span>/root/models<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--db_dir<span class="o">=</span>/root/public_databases<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--output_dir<span class="o">=</span>/root/af_output



<span class="go">For testing, this is take time. Later, we will submit batch job. Figure out how to reduce prediction time.</span>
</pre></div>
</div>
</section>
<section id="step-3-view-oupput">
<h2>Step 3: View oupput<a class="headerlink" href="#step-3-view-oupput" title="Link to this heading"></a></h2>
<p>Alphafold 3 generates output to ‘af_output’. Inside that directory, CIFs are  placed. You can use ‘Chimerax’ for verify structure.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>singularity<span class="w"> </span>shell<span class="w"> </span>/app/chimerax.sif
</pre></div>
</div>
</section>
<section id="reference">
<h2>Reference:<a class="headerlink" href="#reference" title="Link to this heading"></a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><p><a class="reference external" href="https://www.nobelprize.org/prizes/chemistry/2024/press-release/">Press release. NobelPrize.org. Nobel Prize Outreach AB 2024. Fri. 15 Nov 2024.</a></p></li>
<li><p><a class="reference external" href="https://https://www.nature.com/articles/s41586-024-07487-w">Abramson, J., Adler, J., Dunger, J. et al. Accurate structure prediction of biomolecular interactions with AlphaFold 3. Nature 630, 493–500 (2024). https://doi.org/10.1038/s41586-024-07487-w</a></p></li>
<li><p><a class="reference external" href="https://github.com/google-deepmind/alphafold3">AlphaFold 3 Package: github</a></p></li>
<li><p><a href="#id3"><span class="problematic" id="id4">`Nature: AI protein-prediction tool AlphaFold3 is now more open&lt;https://www.nature.com/articles/d41586-024-03708-4&gt;`_</span></a></p></li>
</ol>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quickStart.html" class="btn btn-neutral float-left" title="Quick Start" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mathphysic.html" class="btn btn-neutral float-right" title="Mathematical modeling in Physics Engineering, Biological and Social Science with QwQ LLM from China" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, MAI.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>